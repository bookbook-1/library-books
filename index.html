<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ì‹ ì°©ë„ì„œ ì „ì‹œíšŒ</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        :root { --primary: #2c3e50; --bg: #f8f9fa; }
        
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg); margin: 0; padding: 50px 20px; overflow-x: hidden; }

        /* ë¶€ìœ í•˜ëŠ” ë°°ê²½ íƒ€ì´í¬ê·¸ë˜í”¼ */
        .bg-text {
            position: fixed; font-size: 15vw; font-weight: 900; 
            color: rgba(0,0,0,0.03); z-index: -1; user-select: none; pointer-events: none;
            line-height: 1; white-space: nowrap; text-transform: uppercase;
        }
        .bg-1 { top: 10%; left: -5%; transform: rotate(-5deg); }
        .bg-2 { bottom: 10%; right: -5%; transform: rotate(5deg); }

        h1 { text-align: center; color: var(--primary); font-size: 2.5rem; margin-bottom: 60px; z-index: 10; position: relative; }

        .gallery { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 50px; max-width: 1300px; margin: 0 auto; perspective: 2000px; 
        }
        
        .book-card { 
            background: white; border-radius: 15px; padding: 25px;
            box-shadow: 15px 15px 30px rgba(0,0,0,0.05);
            text-decoration: none; color: inherit; display: flex; flex-direction: column;
            position: relative; transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            transform: rotateY(-15deg) rotateX(5deg) translateZ(0);
            transform-style: preserve-3d; border-left: 1px solid rgba(0,0,0,0.05);
        }

        .book-card:hover { 
            transform: rotateY(0deg) rotateX(0deg) translateZ(50px) scale(1.05);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15); z-index: 100;
        }

        .badge {
            position: absolute; top: 15px; right: -10px; padding: 6px 15px; 
            color: white; font-weight: 800; font-size: 0.8rem; border-radius: 5px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.2); transform: translateZ(20px);
        }
        .badge-ì‹ ê·œ { background: #ff7675; }
        .badge-ì¶”ì²œ { background: #fab1a0; }
        .badge-ì¸ê¸° { background: #d63031; }

        .book-card img { 
            width: 100%; height: 380px; object-fit: contain; 
            border-radius: 8px; margin-bottom: 20px;
            filter: drop-shadow(10px 10px 10px rgba(0,0,0,0.1));
        }
        
        .title { font-size: 1.3rem; font-weight: 800; margin-bottom: 10px; line-height: 1.3; color: #1a1a1a; }
        .info { font-size: 0.9rem; color: #777; margin-bottom: 15px; }
        .description { font-size: 0.95rem; color: #666; line-height: 1.6; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        #status { text-align: center; color: #999; padding: 100px; }
    </style>
</head>
<body>

    <div id="bg-text-1" class="bg-text bg-1"></div>
    <div id="bg-text-2" class="bg-text bg-2"></div>

    <h1>ğŸ“š êµì§ì› ì‹ ì°©ë„ì„œ ì „ì‹œíšŒ</h1>
    <div id="status">ë„ì„œê´€ ì§„ì—´ëŒ€ë¥¼ ì •ë¦¬ ì¤‘ì…ë‹ˆë‹¤...</div>
    <div id="book-gallery" class="gallery"></div>

    <script>
        // ë²”ìœ„ë¥¼ A:Ië¡œ í™•ì¥í•˜ì—¬ Hì—´ê³¼ Iì—´ê¹Œì§€ ê°€ì ¸ì˜´
        const sheetCsvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQvgpFiJL5vGTUdZk3u_cnRyXeZ-Ej5u_FC3HihBMHtHs17ZBSObgQe6aWDH3UFIHpu0oKy1TYhcKPP/pub?gid=0&single=true&output=csv&range=A:I";

        function parseCSV(text) {
            const rows = []; let row = []; let col = ''; let inQuotes = false;
            for (let i = 0; i < text.length; i++) {
                let char = text[i]; let next = text[i+1];
                if (char === '"' && inQuotes && next === '"') { col += '"'; i++; }
                else if (char === '"') { inQuotes = !inQuotes; }
                else if (char === ',' && !inQuotes) { row.push(col); col = ''; }
                else if (char === '\n' && !inQuotes) { row.push(col); rows.push(row); row = []; col = ''; }
                else if (char !== '\r') { col += char; }
            }
            if (col || row.length > 0) { row.push(col); rows.push(row); }
            return rows;
        }

        async function loadBooks() {
            try {
                const response = await fetch(sheetCsvUrl + "&t=" + new Date().getTime());
                const csvText = await response.text();
                const data = parseCSV(csvText);
                
                // 1. âœ¨ ë°°ê²½ íƒ€ì´í¬ê·¸ë˜í”¼ í…ìŠ¤íŠ¸ ì¶”ì¶œ (ì²« ë²ˆì§¸ í–‰ì˜ Hì—´, Iì—´)
                // Hì—´ì€ ì¸ë±ìŠ¤ 7, Iì—´ì€ ì¸ë±ìŠ¤ 8
                const bgTitle1 = data[0][7] || "LIBRARY";
                const bgTitle2 = data[0][8] || "2026 FEB";
                document.getElementById('bg-text-1').innerText = bgTitle1;
                document.getElementById('bg-text-2').innerText = bgTitle2;

                const gallery = document.getElementById('book-gallery');
                gallery.innerHTML = ''; 

                for (let i = 1; i < data.length; i++) {
                    const cols = data[i];
                    if (cols.length >= 5) {
                        const title = cols[0].trim();
                        const author = cols[1] || '';
                        const pub = cols[2] || '';
                        const desc = cols[3] || '';
                        const img = cols[4] ? cols[4].trim() : '';
                        const link = cols[5] ? cols[5].trim() : '#';
                        const badgeText = cols[6] ? cols[6].trim() : ''; 

                        let badgeHtml = badgeText ? `<div class="badge badge-${badgeText}">${badgeText}</div>` : '';

                        if (img.startsWith('http')) {
                            gallery.innerHTML += `
                                <a href="${link}" target="_blank" class="book-card">
                                    ${badgeHtml}
                                    <img src="${img}" alt="${title}">
                                    <div class="title">${title}</div>
                                    <div class="info">${author} | ${pub}</div>
                                    <div class="description">${desc}</div>
                                </a>`;
                        }
                    }
                }
                document.getElementById('status').style.display = 'none';
            } catch (e) {
                document.getElementById('status').innerText = "ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.message;
            }
        }
        loadBooks();
    </script>
</body>
</html>
